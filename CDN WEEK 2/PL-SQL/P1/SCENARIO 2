-- Adding IsVIP column to Customers table

ALTER TABLE Customers ADD (IsVIP VARCHAR2(3));

DECLARE
    CURSOR c_customers IS
        SELECT CustomerID, Balance
        FROM Customers;
    v_CustomerID Customers.CustomerID%TYPE;
    v_Balance Customers.Balance%TYPE;
BEGIN
    FOR r_customer IN c_customers LOOP
        v_CustomerID := r_customer.CustomerID;
        v_Balance := r_customer.Balance;

        IF v_Balance > 10000 THEN
            UPDATE Customers
            SET IsVIP = 'YES'
            WHERE CustomerID = v_CustomerID;
        ELSE
            UPDATE Customers
            SET IsVIP = 'NO'
            WHERE CustomerID = v_CustomerID;
        END IF;
    END LOOP;
    COMMIT;
END;
